<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>EC Kit</title>

    <!-- Bootstrap Core CSS -->
    <link href="static/vendor2/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="/static/vendor2/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="/static/vendor2/morrisjs/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/static/vendor2/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

</head>


<body>

<div id="wrapper">

    <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <a class="navbar-brand" href="../index.html">Exam Committee's Kit</a>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/"><span class="glyphicon glyphicon-log-in"></span> Sign Up</a></li>
            </ul>
        </div>
        <!-- /.navbar-header -->
    </nav>

    <div  style="margin-left: 10%">

        <div align="centre">
            <h2 class="page-header" style="margin-left: 200px;">Please Login to Continue</h2>
        </div>

        <div id="form_inputs">

            <div class="container" style="margin-left: 200px;">
                <div class="card card-login mx-auto mt-5">

                    <form>
                        <div class="w3ls-icon">
                            <div>
                                <label for="email" >Username</label>
                            </div>

                            <input name="username" id="email" type="text" placeholder=""
                                   required="" style="width: 40%; height: 35px; margin-top: 5px; margin-bottom: 5px">
                        </div>
                        <div class="w3ls-icon">
                            <div>
                                <label for="password">Password</label>
                            </div>

                            <input name="username"  id="password" type="password"
                                   required="" style="width: 40%; height: 34px; margin-top: 5px; margin-bottom: 10px">
                        </div>


                        <div class="form-group">

                            <div>
                                <label for="chooseUserType">Login As?</label>
                            </div>

                            <select type="choose" class="fa-lock" id="chooseUserType" name="userType"
                                    placeholder="Login As?" required="" style="width: 40%; height: 38px; margin-top: 5px">
                                <option id="type1" value="Admin"> Admin</option>
                                <option id="type2" value="Teacher"> Teacher</option>
                                <option id="type3" value="Staff"> Office Staff</option>
                            </select>

                        </div>

                        <div class="form-group">
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" type="checkbox" style="margin-top: 5px"> Remember Password</label>
                            </div>
                        </div>

                    </form>
                                            <input class="btn btn-primary" type="submit" value="Login" align="centre" style="margin-top: 5px" onclick="submitLoginCredential()"/>


                    <script type="text/javascript">

                        function submitLoginCredential() {

                            console.log("Submitting Credentials");

                            var xhttp = new XMLHttpRequest();

                            var e = document.getElementById('chooseUserType');
                            var userType = e.options[e.selectedIndex].value;

                            var email = document.getElementById("email").value;
                            var password = document.getElementById("password").value;

                            xhttp.onreadystatechange = function () {
                                if(this.readyState ==4 && this.status==404)
                                {
                                    var x = xhttp.responseText;
                                    console.log("response: " + x);

                                }
                                if (this.readyState == 4 && this.status == 200) {
                                    var x = xhttp.responseText;
                                    console.log("response: " + x);

                                    if (x == "OK_Admin") {
                                        window.location.replace("http://127.0.0.1:5000/admin");
                                        console.log("response: " + x);
                                    }
                                    else if (x == "OK_Teacher") {
                                        window.location.replace("http://127.0.0.1:5000/teacher");
                                        console.log("Teacher HomePage is not created and connected");
                                    }
                                    else if (x == "OK_Staff") {
                                        //  window.location.replace("http://127.0.0.1:5000/office");
                                        console.log("Staff HomePage is not created and connected");
                                    }

                                    else {
                                        //console.log("Staff HomePage is not created and connected");
                                        window.location.replace("http://127.0.0.1:5000/");
                                    }
                                }
                            };

                            if (email != "" && password != "") {
                                var args = [email, password, userType];
                                xhttp.open("GET", "http://127.0.0.1:5000/Authenticate?query="
                                    + JSON.stringify(args), true);
                                xhttp.send();
                            }

                        }

                    </script>

                </div>
            </div>

        </div>

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="/static/vendor2/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/static/vendor2/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="/static/vendor2/metisMenu/metisMenu.min.js"></script>

    <!-- Morris Charts JavaScript -->
    <script src="/static/vendor2/raphael/raphael.min.js"></script>
    <script src="/static/vendor2/morrisjs/morris.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/static/dist/js/sb-admin-2.js"></script>

</div>

</body>

</html>